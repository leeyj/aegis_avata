# 🧠 AEGIS 프롬프트 관리 가이드 (Prompts Specification)

이 문서는 AEGIS 시스템의 지능형 응답을 제어하는 `config/prompts.json`의 구조와 각 섹션별 사용 목적을 정의합니다. 사용자는 이 파일을 수정하여 AI 비서의 말투, 분석 깊이, 응답 형식을 커스터마이징할 수 있습니다.

---

## 1. 프롬프트 계층 구조 (JSON Structure)

프롬프트 파일은 크게 세 가지 핵심 도메인으로 나뉩니다.

| 최상위 키 | 대상 서비스 | 주요 목적 |
| :--- | :--- | :--- |
| `DASHBOARD_INTERNAL` | `gemini_service.py`, `briefing_manager.py` | 대시보드 위젯 분석, 자동 브리핑, 선제적 알림 생성 |
| `EXTERNAL_AI_HUB` | `ai_service.py` | 터미널을 통한 외부 AI(Grok, Ollama 등) 연동 질의 지침 |
| `NLP_COMMAND_ENGINE` | `gemini_service.py` | 사용자 자연어 명령 분석 및 시스템 액션 매핑 |

---

## 2. 세부 섹션 가이드

### 2.1 DASHBOARD_INTERNAL (내부 로직용)
시스템 데이터를 기반으로 아바타가 능동적으로 보고하는 방식을 결정합니다.

- **`briefing`**: 전체 시스템 데이터(날씨, 금융, 일정 등)를 통합 분석하는 메인 프롬프트.
- **`proactive`**: 특정 트리거(급격한 지수 변동 등) 발생 시 사용자에게 말을 거는 방식 정의.
- **`widget_briefing`**: 개별 위젯 데이터만 집중적으로 요약할 때 사용되는 지침.

### 2.2 EXTERNAL_AI_HUB (외부 AI 연동용)
터미널에서 선택한 AI 엔진별로 최적화된 지침을 제공합니다. 시스템은 선택된 `source_key`와 매칭되는 프롬프트를 우선 사용하며, 없을 경우 `default`를 사용합니다.

| 하위 키 | 적용 대상 | 특징 |
| :--- | :--- | :--- |
| `default` | 공통 적용 | [DISPLAY]와 [VOICE] 분리 규칙이 포함된 기본 가이드 |
| `ollama` | Ollama (로컬) | 로컬 리소스 효율성을 고려한 명확하고 짧은 답변 지침 |
| `grok` | Grok (xAI) | 최신 데이터를 활용한 전술적이고 품격 있는 말투 지침 |
| `gemini` | Gemini (Google) | 풍부한 인텔리전스와 논리적인 분석 위주의 지침 |
| `chatgpt` | ChatGPT (OpenAI) | 범용적이고 창의적인 상세 답변 지침 |

> [!IMPORTANT]
> **이중 응답 규격 ([DISPLAY] / [VOICE])**
> 모든 외부 AI 허브 프롬프트는 화면용과 음성용 답변을 분리하여 태그로 감싸도록 설계되어야 합니다.

### 2.3 NLP_COMMAND_ENGINE (자연어 제어용)
사용자의 음성이나 텍스트 명령을 분석하여 시스템 제어 JSON을 생성하는 로직입니다.

- **`command_parsing`**: "날씨 위젯 켜줘" 같은 명령을 `action`과 `target`으로 변환하는 규칙.

---

## 3. 커스터마이징 팁
1. **말투 변경**: 각 섹션의 지침 마지막에 "항상 군대식 말투로 답변해줘"와 같은 페르소나를 추가하면 아바타의 성격이 즉시 변합니다.
2. **요약 정도 조절**: `[VOICE]` 영역의 글자 수 제한이나 문장 수 지침을 수정하여 아바타의 발화 길이를 조절할 수 있습니다.
3. **태그 준수**: `[DISPLAY]`와 `[VOICE]` 태그는 서버 코드에서 파싱에 사용되므로 반드시 포함되도록 지시해야 합니다.

---
*최종 업데이트: 2026-02-27*
