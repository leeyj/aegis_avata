# 🛠️ Live2D 자산 검증 및 알리아스(Alias) 도구 사용 가이드

본 문서는 AEGIS 시스템의 다양한 Live2D 모델들을 표준화된 방식으로 관리하고 검증하기 위한 도구 사용법을 설명합니다.

---

## 📂 1. 모델 디렉토리 구조 (test_models)

모든 검증 및 생성 작업은 프로젝트 루트의 **`test_models/`** 폴더를 기준으로 진행됩니다. 새로운 모델을 추가하거나 테스트할 때는 아래의 구조를 준수해야 합니다.

```text
test_models/
└── {모델_폴더명}/
    ├── {모델이름}.model3.json  (필수)
    ├── motions/                (또는 animations/)
    │   └── idle.motion3.json
    └── expressions/
        └── joy.exp3.json
```

> [!IMPORTANT]
> **검사 대상:** 도구들은 폴더 내부에 `.model3.json` 파일이 존재하는 경우에만 '유효한 모델'로 인식하고 검사를 수행합니다.

---

## 🔍 2. 도구별 상세 사용법

### ① check_assets.py (지능형 검증 및 생성기)
파일명에서 의미를 추론하여 `alias.json`을 생성하고, 파일 유실 여부를 체크합니다.

*   **실행 명령어:**
    ```powershell
    python test_models/check_assets.py --alias
    ```
*   **주요 기능:**
    *   **지능형 추론:** `待机`, `高兴`, `기본`, `01` 등의 키워드를 분석하여 `idle`, `joy` 등 표준 태그로 자동 매핑.
    *   **자동 생성:** 매핑 결과를 바탕으로 모델 폴더 내에 `alias.json` 파일을 즉시 생성.

### ② check_missing_alias.py (누락 리포터)
전체 모델을 순회하며 설정이 빠진 모델을 깔끔한 표 형태로 보여줍니다.

*   **실행 명령어:**
    ```powershell
    python test_models/check_missing_alias.py
    ```
*   **결과 예시:**
    ```text
    모델명                    | 상태            | 비고
    ------------------------------------------------------------
    sry_chufang              | 파일 누락       | alias.json 없음
    ------------------------------------------------------------
    ```

---

## 💡 3. 결과에 따른 수정 및 최적화 예시

도구가 파일명을 제대로 인식하지 못하거나 '내용 비어있음'으로 나올 경우, 파일명을 아래 형식을 참고하여 수정하면 추론 엔진이 더 정확하게 인식합니다.

### ✅ 사례 1: 일상적인 동작 (Idle) 매핑 실패 시
*   **문제:** 파일명이 `z1.motion3.json` 처럼 의미를 알 수 없는 코드인 경우.
*   **해결:** 파일명을 `idle_z1.motion3.json` 또는 `待机_z1.motion3.json`으로 변경 후 다시 실행하세요.
*   **인식 키워드:** `idle`, `wait`, `stand`, `base`, `loop`, `待机`, `기본` 등.

### ✅ 사례 2: 감정/표정 (Expression) 매핑 오류 시
*   **문제:** 표정 파일명이 `f05.exp3.json`인데 도구가 놓친 경우.
*   **해결:** 파일명을 `joy_f05.exp3.json` 또는 `smile.exp3.json`으로 변경하세요.
*   **인식 키워드:** 
    *   **Joy:** `happy`, `smile`, `laugh`, `웃음`, `高兴`.
    *   **Shock:** `shock`, `surprise`, `놀람`, `惊讶`.
    *   **Sad:** `cry`, `sad`, `울음`, `悲伤`.

### ✅ 사례 3: 폴더 구조가 상이한 경우
*   **문제:** 모션 파일이 `test_models/my_model/etc/` 처럼 깊숙이 있는 경우.
*   **해결:** 시스템은 `motions/` 또는 `animations/` 폴더만 탐색하도록 최적화되어 있습니다. 모션 파일들을 `motions/` 폴더로 모아주세요.

---

## 🚀 4. 작업 워크플로우 (요약)

1.  **모델 투입:** `test_models/`에 새로운 모델 폴더 복사.
2.  **지능형 알리아스 생성 (Sponsors Only)**: 파일명을 분석하여 `idle`, `joy` 등 의미 있는 별명을 자동으로 매핑합니다. (후원자 키 필요)
    *   **사용법**:
        1. `config/secrets.json`에 `SPONSOR_KEY`를 입력합니다.
        2. `python test_models/check_assets.py --alias` 실행.
3.  **결과 확인:** 생성된 `alias.json` 내용을 확인.
4.  **수동 보정 (필요 시):** 도구가 못 잡는 파일은 파일명을 위 가이드에 맞춰 수정 후 재실행.
5.  **최종 확인:** `python test_models/check_missing_alias.py`로 모든 모델이 '정상'인지 확인.

---
> [!TIP]
> 본 도구는 한문(중국어/일본어), 한글, 영어 키워드를 모두 지원합니다. 기존 파일명을 완전히 바꿀 필요 없이 파일명 앞에 `idle_` 등을 덧붙이는 것만으로도 충분합니다.
